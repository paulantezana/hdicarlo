let exhibitorGlobalMap,exhibitorGlobalMarker;class InfinityLoading{constructor(t,e){this.loading=!1,this.more=!0,this.current=0,this.container=document.querySelector(t),this.dataSend=e,this.listener()}reload(){this.loading=!1,this.more=!0,this.current=0,this.container&&(this.container.innerHTML="",this.loadMore())}listener(){this.loadMore(),this.container&&this.container.addEventListener("scroll",t=>{this.container.scrollTop+this.container.clientHeight>=this.container.scrollHeight-50&&this.loadMore()})}loadingState(){if(this.container){let t=this.container.nextElementSibling;if(t){if(this.loading)return void t.classList.add("visible");t.classList.remove("visible")}}}async loadMore(){!this.loading&&this.more&&(this.loading=!0,this.more=!1,this.container&&(this.loadingState(),await RequestApi.fetch("/admin/exhibitor/states",{method:"POST",body:{...this.dataSend,current:this.current+1}}).then(t=>{if(t.success){let e=t.result.data;this.current=t.result.current,this.more=t.result.more,e.forEach(t=>{let e=`<div>\n                                                    <strong class="SnMr-1">${t.exhibitor_state}</strong>\n                                                    <small>${t.time_of_issue}</small>\n                                                    <div>\n                                                        <span>${t.full_name}</span>\n                                                    </div>\n                                                </div>`;this.container.insertAdjacentHTML("beforeend",e)})}else SnModal.error({title:"Algo salio mal!",content:t.message})}).finally(()=>{this.loading=!1,this.loadingState()})))}}function initGoogleMaps(){geoGetCurrentPosition().then(t=>{drawGoogleMapExhibitorGlobal(t)}).catch(t=>SnMessage.error({content:t}))}function drawGoogleMapExhibitorGlobal(t){exhibitorGlobalMap=new google.maps.Map(document.getElementById("exhibitorMap"),{center:t,zoom:17,rotateControl:!1,fullscreenControl:!1,streetViewControl:!1,mapTypeControl:!1}),exhibitorGlobalMarker=new google.maps.Marker({position:t,draggable:!0,animation:google.maps.Animation.DROP,map:exhibitorGlobalMap})}function setPositionMarkerGlobal(t){let e=setInterval(()=>{if(exhibitorGlobalMap&&exhibitorGlobalMarker){clearInterval(e);let i=new google.maps.LatLng(t.lat,t.lng);exhibitorGlobalMap.setCenter(i),exhibitorGlobalMap.setZoom(17),exhibitorGlobalMarker.setPosition(i)}},1e3)}function exhibitorSetPositionMpas(){let t=document.getElementById("exhibitorLatLong").value.split(",");if(t.length>0){setPositionMarkerGlobal({lat:t[0],lng:t[1]})}else SnMessage.error({content:"UbicaciÃ³n mal establecida"})}document.addEventListener("DOMContentLoaded",()=>{exhibitorSetPositionMpas();let t=document.getElementById("exhibitorId").value;new InfinityLoading("#exhibitorStates",{exhibitorId:t})});