function exhibitorSetLoading(e){let t=document.querySelectorAll(".jsUserAction");e?t&&t.forEach(e=>{e.setAttribute("disabled","disabled")}):t&&t.forEach(e=>{e.removeAttribute("disabled")})}function searchExhibitorByCode(){let e=document.getElementById("searchExhibitorCode").value;exhibitorSetLoading(!0),RequestApi.fetch("/admin/exhibitor/getByCode",{method:"POST",body:{code:e}}).then(e=>{e.success?document.getElementById("exhibitorDetail").innerHTML=e.view:SnModal.error({title:"Algo salió mal",content:e.message})}).finally(e=>{exhibitorSetLoading(!1)})}function clearOrder(){document.getElementById("exhibitorDetail").innerHTML="",document.getElementById("searchExhibitorCode").value="",document.getElementById("orderObservation").value=""}function saveOrder(){if(null==document.getElementById("exhibitorId"))return void SnModal.error({title:"Algo salió mal",content:"No se encontró ninguna exibidora"});let e={};e.code=document.getElementById("searchExhibitorCode").value,e.observation=document.getElementById("orderObservation").value,e.exhibitorId=document.getElementById("exhibitorId").value,e.latitude=document.getElementById("currentLatitude").value,e.longitude=document.getElementById("currentLongitude").value,e.dateOfDelivery=document.getElementById("orderDateOfDelivery").value,SnModal.confirm({title:"¿Estás seguro de continuar con el registro?",content:"",okText:"Si",okType:"error",cancelText:"No",onOk(){exhibitorSetLoading(!0),RequestApi.fetch("/admin/order/save",{method:"POST",body:e}).then(e=>{e.success?(SnMessage.success({content:e.message}),clearOrder()):SnModal.error({title:"Algo salió mal",content:e.message})}).finally(e=>{exhibitorSetLoading(!1)})}})}document.addEventListener("DOMContentLoaded",()=>{let e=document.getElementById("searchExhibitorCode");e&&e.addEventListener("keyup",e=>{"Enter"==e.code&&searchExhibitorByCode()}),geoGetCurrentPosition().then(e=>{document.getElementById("currentLatitude").value=e.lat,document.getElementById("currentLongitude").value=e.lng}).catch(e=>SnMessage.error({content:e}))});