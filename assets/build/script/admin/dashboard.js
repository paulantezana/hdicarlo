document.addEventListener("DOMContentLoaded",()=>{ordersChart(),deliveryChart(),document.getElementById("chartStartDate").addEventListener("change",()=>{ordersChart(),deliveryChart()}),document.getElementById("chartEndDate").addEventListener("change",()=>{ordersChart(),deliveryChart()})});let chartColors={red:"rgb(255, 99, 132)",orange:"rgb(255, 159, 64)",yellow:"rgb(255, 205, 86)",green:"rgb(75, 192, 192)",blue:"rgb(54, 162, 235)",purple:"rgb(153, 102, 255)",grey:"rgb(201, 203, 207)"};function ordersChart(){let e=document.getElementById("chartStartDate").value,t=document.getElementById("chartEndDate").value;SnFreeze.freeze({selector:"#filterWrapper"}),RequestApi.fetch("/admin/report/orderChart",{method:"POST",body:{startDate:e,endDate:t}}).then(e=>{e.success?buildOrdersChart(e.result):SnModal.error({title:"Algo salió mal",content:e.message})}).finally(e=>{SnFreeze.unFreeze()})}function deliveryChart(){let e=document.getElementById("chartStartDate").value,t=document.getElementById("chartEndDate").value;SnFreeze.freeze({selector:"#filterWrapper"}),RequestApi.fetch("/admin/report/deliveryChart",{method:"POST",body:{startDate:e,endDate:t}}).then(e=>{e.success?buildDeliveryChart(e.result):SnModal.error({title:"Algo salió mal",content:e.message})}).finally(e=>{SnFreeze.unFreeze()})}function buildOrdersChart(e){let t=document.getElementById("ordersChart");new Chart(t,{type:"line",data:{datasets:[{label:"Ordenes",backgroundColor:Color(chartColors.red).alpha(.5).rgbString(),borderColor:chartColors.red,data:[...e].map(e=>({x:e.created_at_query,y:e.count}))}]},options:{maintainAspectRatio:!1,responsive:!0,scales:{xAxes:[{type:"time",time:{parser:"YYYY-MM-DD",round:"day",tooltipFormat:"ll"}}]}}})}function buildDeliveryChart(e){let t=document.getElementById("deliveryChart");new Chart(t,{type:"line",data:{datasets:[{label:"Entregas",backgroundColor:Color(chartColors.red).alpha(.5).rgbString(),borderColor:chartColors.red,data:[...e].map(e=>({x:e.created_at_query,y:e.count}))}]},options:{maintainAspectRatio:!1,responsive:!0,scales:{xAxes:[{type:"time",time:{parser:"YYYY-MM-DD",round:"day",tooltipFormat:"ll"}}]}}})}