function filterByDateChange(){let e=document.querySelector('input[name="filterByDate"]:checked').value,t=document.getElementById("filterYearWrapper"),r=document.getElementById("filterMonthWrapper"),o=document.getElementById("filterDayWrapper");t.classList.add("hidden"),r.classList.add("hidden"),o.classList.add("hidden"),1==e?t.classList.remove("hidden"):2==e?r.classList.remove("hidden"):3==e&&o.classList.remove("hidden"),reportIncomeList()}function reportIncomeList(){let e=document.getElementById("reportIncomeTable"),t=document.querySelector('input[name="filterByDate"]:checked').value,r=document.getElementById("filterYear").value,o=document.getElementById("filterMonth").value,l=document.getElementById("filterDay").value;e&&(SnFreeze.freeze({selector:"#reportIncomeTable"}),RequestApi.fetch("/admin/report/incomeReportTable",{method:"POST",body:{filterByDate:t,filterYear:r,filterMonth:o,filterDay:l}}).then(r=>{r.success?(e.innerHTML=r.view,1==t||2==t&&buildMonthlyIncomeChart(r.result.incomes)):SnModal.error({title:"Algo saliÃ³ mal",content:r.message})}).finally(e=>{SnFreeze.unFreeze("#reportIncomeTable")}))}function buildMonthlyIncomeChart(e){let t=document.getElementById("reportIncomeChart"),r=0,o=0,l=0,a=0,n=0,i=0,d=0,s=0,c=0,m=0,p=0,u=0;e.forEach(e=>{r+=parseFloat(e.del_1),o+=parseFloat(e.del_2),l+=parseFloat(e.del_3),a+=parseFloat(e.del_4),n+=parseFloat(e.del_5),i+=parseFloat(e.del_6),d+=parseFloat(e.del_7),s+=parseFloat(e.del_8),c+=parseFloat(e.del_9),m+=parseFloat(e.del_10),p+=parseFloat(e.del_11),u+=parseFloat(e.del_12)}),new Chart(t,{type:"line",data:{labels:["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],datasets:[{label:"Ingreso mensual",backgroundColor:Color("rgb(5, 101, 255)").alpha(.5).rgbString(),borderColor:"rgb(5, 101, 255)",fill:!1,data:[{x:"Enero",y:r},{x:"Febrero",y:o},{x:"Marzo",y:l},{x:"Abril",y:a},{x:"Mayo",y:n},{x:"Junio",y:i},{x:"Julio",y:d},{x:"Agosto",y:s},{x:"Septiembre",y:c},{x:"Octubre",y:m},{x:"Noviembre",y:p},{x:"Diciembre",y:u}]}]},options:{maintainAspectRatio:!1,responsive:!0}})}document.addEventListener("DOMContentLoaded",()=>{reportIncomeList()});